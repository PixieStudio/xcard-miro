<!DOCTYPE html>
<html lang="en">

<head>
	<script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>
	<link rel="stylesheet" href="https://miro.com/app/static/styles.1.0.css" />
	<link rel="stylesheet" href="./css/styles.css" />
</head>

<body>
	<div class="scrollable-container-modal" id="cookieModal">
		<h1 class="text-center">Installer le Plugin.</h1>
		<p class="text-center">Afin de pouvoir utiliser le plugin, veuillez l'autoriser sur le board actuel en cliquand
			sur le bouton "Autoriser".</p>
		<p class="text-center"><strong>Veuillez <span class="text-uppercase">recharger la page Miro</span> après
				l'installation.</strong></p>

		<button class="auth-app miro-btn miro-btn--primary miro-btn--medium">Autoriser</button>
	</div>
	<script>
		document.querySelector('button').addEventListener('click', function () {
			const authorizeOptions = {
				response_type: 'token',
				redirect_uri: 'https://' + window.location.host + '/static/web-plugin/auth-success.html'
			}
			miro.authorize(authorizeOptions)
				.then(() => miro.getToken())
				.then((token) => {
					if (token) {
						miro.board.ui.closeModal('success')
					} else {
						console.log('Quelque chose a mal tourné !')
					}
				})
		})
	</script>
</body>

</html>
